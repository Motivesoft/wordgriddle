<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/style.css">
    <title>Excluded Word List Manager</title>
</head>

<body>
    <a href="/index.html">Home</a>
    <a href="/admin/bonus.html">Bonus</a>
    <a href="/admin/excluded.html">Excluded</a>
    <h1>Excluded Word List Manager</h1>

    <div class="container">
        <div class="button-stack">
            <div id="wordListContainer">
                <div id="wordList"></div>
            </div>
            <div id="wordCountDisplay"></div>
        </div>
        <div class="button-stack">
            <div class="top-buttons">
                <button onclick="openInsertWordsModal()">Insert</button>
                <button onclick="performDelete()">Delete</button>
                <script>
                    function performDelete() {
                        const selectedWords = Array.from(document.querySelectorAll('input[type="checkbox"]:checked'))
                            .map(checkbox => checkbox.value);

                        if (selectedWords.length === 0) {
                            alert("Select at least one word to delete. Select words by checking the boxes next to them.");
                            return;
                        }

                        deleteWords('excluded', selectedWords);
                    }
                </script>
            </div>
            <div class="spacer"></div>
            <div class="bottom-buttons">
                <button onclick="document.getElementById('uploadFile').click()">Upload</button>
                <input type="file" id="uploadFile" accept=".txt" onchange="uploadWordList('excluded')"
                    style="display:none">
                <button onclick="downloadWordList('excluded')">Download</button>
            </div>
        </div>
    </div>

    <!--
        Buttons for managing the word list.
        
        Note that the <input> element for Upload is set to be hidden so that we can use a button
        in the style of our other buttons for the desired behaviour
    -->

    <div id="insertWordsModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeInsertWordsModal()">&times;</span>
            <h2>Enter new words, one per line</h2>
            <textarea id="multilineInput" rows="10" cols="40"></textarea>
            <div style="padding-top: 8px;">
                <button onclick="closeInsertWordsModal()">Cancel</button>
                <button onclick="submitInsertWordsModal()">Insert</button>
            </div>
            <script>
                function openInsertWordsModal() {
                    resetInsertWordsModal();
                    openModal("insertWordsModal");
                }
                function submitInsertWordsModal() {
                    var text = document.getElementById("multilineInput").value;
                    const newWords = text.split('\n').filter(word => word.trim() !== '');

                    if (newWords.length === 0) {
                        alert("Provide at least one word to insert.");
                        return;
                    }

                    insertWords('excluded', newWords);
                    closeInsertWordsModal();
                }
                function resetInsertWordsModal() {
                    document.getElementById("multilineInput").value = "";
                }
                function closeInsertWordsModal() {
                    closeModal("insertWordsModal");
                    resetInsertWordsModal();
                }
            </script>
        </div>
    </div>

    <script src="operations.js"></script>
</body>

</html>